!function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class t{constructor(t,n,s){e(this,"_handleLikeClick",(e=>{e.target.classList.toggle("gallery__card-like_button_active")})),e(this,"_handleTrashClick",(()=>{this._element.remove(),this._element=null})),this._text=t.text,this._image=t.image,this._cardSelector=n,this._handleImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".gallery__card").cloneNode(!0)}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".gallery__card-image"),t=this._element.querySelector(".gallery__card-place");return e.style.backgroundImage="url(".concat(this._image,")"),t.textContent=this._text,this._element}_setEventListeners(){const e=this._element.querySelector(".gallery__card-like_button"),t=this._element.querySelector(".gallery__card-trash-button");this._element.querySelector(".gallery__card-image").addEventListener("click",(()=>this._handleImageClick())),e.addEventListener("click",this._handleLikeClick),t.addEventListener("click",this._handleTrashClick)}}var n=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._element=t,this._inputList=Array.from(this._element.querySelectorAll(this._inputSelector)),this._buttonElement=this._element.querySelector(this._submitButtonSelector)}_showInputError(e,t){const n=this._element.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}_hideInputError(e){const t=this._element.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}resetValidationError(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._element.addEventListener("submit",(function(e){e.preventDefault()})),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._element.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class s{constructor(e){var t,n;n=e=>{"Escape"===e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n,this._popupSelector=e,this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupSelector.classList.add("popup_fadein"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupSelector.classList.remove("popup_fadein"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupSelector.addEventListener("click",(e=>{e.target.classList.contains("close-button")&&this.close()})),this._popupSelector.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class r extends s{constructor(e,t){super(e),this._handleFormSubmit=t,this._formSelector=e.querySelector(".form")}_getInputValues(){const e=Array.from(this._formSelector.querySelectorAll(".form__input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._formSelector.addEventListener("submit",(()=>this._handleFormSubmit(this._getInputValues())))}}const i=document.querySelector(".edit"),o=document.querySelector(".add"),l=document.querySelector(".image"),a=document.querySelector(".profile__edit-button"),c=(i.querySelector(".edit__close-button"),document.querySelector(".profile__add-button")),u=(o.querySelector(".add__close-button"),l.querySelector(".image__close-button"),document.getElementById("gallery-container"),document.querySelector(".gallery__container")),d=document.querySelector(".edit__form"),_=o.querySelector(".add__form"),m=document.getElementById("name-input"),h=document.getElementById("job-input"),p=(document.querySelector(".profile__name"),document.querySelector(".profile__name-discription"),{formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}),g=new class extends s{open(e,t){const n=this._popupSelector.querySelector(".image__popup"),s=this._popupSelector.querySelector(".image__discription");n.src=e,n.alt=t,s.textContent=t,super.open()}}(l);function y(e){return new t(e,"#card-template",(()=>{g.open(e.image,e.text)})).generateCard()}const S=new class{constructor(e,t){let{data:n,renderer:s}=e;this._initialArray=n,this._renderer=s,this._container=t}renderItems(){this._initialArray.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({data:[{text:"Yosemite Valley",image:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{text:"Lake Louise",image:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{text:"Bald Mountains",image:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{text:"Latemar",image:"https://code.s3.yandex.net/web-code/latemar.jpg"},{text:"Vanoise National Park",image:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{text:"Lago di Braies",image:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=y(e);S.addItem(t)}},u);S.renderItems();const b=new class{constructor(e){let{nameSelector:t,jobSelector:n}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:n}=e;this._nameElement.textContent=t,this._jobElement.textContent=n}}({nameSelector:".profile__name",jobSelector:".profile__name-discription"}),E=new r(i,(e=>{b.setUserInfo({name:e.name,job:e.job}),E.close()})),v=new r(o,(e=>{const t=y({text:e.title,image:e.image});S.addItem(t),v.close(),_.reset(),f.resetValidationError()}));E.setEventListeners(),v.setEventListeners(),g.setEventListeners(),a.addEventListener("click",(()=>{const e=b.getUserInfo();m.value=e.name,h.value=e.job,E.open()})),c.addEventListener("click",(()=>{v.open()}));const L=new n(p,d),f=new n(p,_);L.enableValidation(),f.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LCtCQUdUTSxFQUFtQixJQUFJbkQsRUFBY1csR0FBb0JKLElBQzdEb0MsRUFBWU8sWUFBWSxDQUFFekMsS0FBTUYsRUFBWUUsS0FBTXdDLElBQUsxQyxFQUFZMEMsTUFDbkVFLEVBQWlCNUQsV0FHYjZELEVBQWUsSUFBSXBELEVBQWNZLEdBQWdCTCxJQUNyRCxNQUFNbUMsRUFBY2IsRUFBVyxDQUM3QnJHLEtBQU0rRSxFQUFZOEMsTUFDbEIzSCxNQUFPNkUsRUFBWTdFLFFBR3JCcUcsRUFBVVEsUUFBUUcsR0FFbEJVLEVBQWE3RCxRQUNiNEIsRUFBUW1DLFFBQ1JDLEVBQWlCakYsMEJBR25CNkUsRUFBaUJ0RCxvQkFDakJ1RCxFQUFhdkQsb0JBQ2IyQixFQUFnQjNCLG9CQUVoQmlCLEVBQWtCbkUsaUJBQWlCLFNBQVMsS0FDMUMsTUFBTTZHLEVBQWFiLEVBQVlLLGNBQy9CNUIsRUFBVVYsTUFBUThDLEVBQVcvQyxLQUM3QlksRUFBU1gsTUFBUThDLEVBQVdQLElBRTVCRSxFQUFpQnhELFVBR25Cb0IsRUFBaUJwRSxpQkFBaUIsU0FBUyxLQUN6Q3lHLEVBQWF6RCxVQUdmLE1BQU04RCxFQUFvQixJQUFJQyxFQUFjcEMsRUFBZUosR0FDckRxQyxFQUFtQixJQUFJRyxFQUFjcEMsRUFBZUgsR0FFMURzQyxFQUFrQnhFLG1CQUNsQnNFLEVBQWlCdEUsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL2Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvcG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvcG9wdXAtd2l0aC1mb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9wb3B1cC13aXRoLWltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL3NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvdXNlci1pbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vLyBDbGFzc2VzIC8vL1xuaW1wb3J0IHsgaW1hZ2VQb3B1cE1vZGxlIH0gZnJvbSBcIi4vcG9wdXAtd2l0aC1pbWFnZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fdGV4dCA9IGRhdGEudGV4dDtcbiAgICB0aGlzLl9pbWFnZSA9IGRhdGEuaW1hZ2U7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZFwiKTtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkLWltYWdlXCIpO1xuICAgIGNvbnN0IGNhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkLXBsYWNlXCIpO1xuXG4gICAgY2FyZEltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9pbWFnZX0pYDtcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmdhbGxlcnlfX2NhcmQtbGlrZV9idXR0b25cIlxuICAgICk7XG4gICAgY29uc3QgdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5nYWxsZXJ5X19jYXJkLXRyYXNoLWJ1dHRvblwiXG4gICAgKTtcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZC1pbWFnZVwiKTtcblxuICAgIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlSW1hZ2VDbGljaygpKTtcblxuICAgIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VDbGljayk7XG5cbiAgICB0cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlVHJhc2hDbGljayk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUNsaWNrID0gKGV2dCkgPT4ge1xuICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImdhbGxlcnlfX2NhcmQtbGlrZV9idXR0b25fYWN0aXZlXCIpO1xuICB9O1xuXG4gIF9oYW5kbGVUcmFzaENsaWNrID0gKCkgPT4ge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH07XG59XG4iLCIvLy8gRm9ybVZhbGlkYXRvciAvLy9cbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2VsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcblxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb25FcnJvcigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwicG9wdXBfZmFkZWluXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2ZhZGVpblwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJjbG9zZS1idXR0b25cIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9wb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpXG4gICAgKTtcblxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG5cbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2Zvcm1TZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpXG4gICAgKTtcbiAgfVxufVxuIiwiLy8vLy8gcG9wdXBzLy8vL1xuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlTW9kdWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2R1bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFwiKTtcbmV4cG9ydCBjb25zdCBpbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZVwiKTtcblxuLy8vLy9idXR0b25zLy8vXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVQb3B1cENsb3NlQnV0dG9uID0gZWRpdFByb2ZpbGVNb2R1bGUucXVlcnlTZWxlY3RvcihcbiAgXCIuZWRpdF9fY2xvc2UtYnV0dG9uXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBjYXJkUG9wdXBDbG9zZUJ1dHRvbiA9XG4gIGFkZENhcmRNb2R1bGUucXVlcnlTZWxlY3RvcihcIi5hZGRfX2Nsb3NlLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBpbWFnZVBvcHVwQ2xvc2VCdXR0b24gPSBpbWFnZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLmltYWdlX19jbG9zZS1idXR0b25cIlxuKTtcblxuLy8vLyBXcmFhcGVycyAvLy8vL1xuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYWxsZXJ5LWNvbnRhaW5lclwiKTtcbmV4cG9ydCBjb25zdCBjYXJkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jb250YWluZXJcIik7XG5cbi8vLy8vIEZvcm1zIC8vLy9cbmV4cG9ydCBjb25zdCBlZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBhZGRGb3JtID0gYWRkQ2FyZE1vZHVsZS5xdWVyeVNlbGVjdG9yKFwiLmFkZF9fZm9ybVwiKTtcblxuLy9JbnB1dHMvL1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmFtZS1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiam9iLWlucHV0XCIpO1xuXG4vLyBDb25zdCBFbGVtZW50cyAvL1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWUtZGlzY3JpcHRpb25cIik7XG5cbi8vLyBDYXJkIFJlbmRlcmluZyAgLy8vXG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICB0ZXh0OiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGltYWdlOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgdGV4dDogXCJMYWtlIExvdWlzZVwiLFxuICAgIGltYWdlOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgdGV4dDogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGltYWdlOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgdGV4dDogXCJMYXRlbWFyXCIsXG4gICAgaW1hZ2U6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIHRleHQ6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgaW1hZ2U6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIHRleHQ6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBpbWFnZTogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRDb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXG59O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9zZWN0aW9uLmpzXCI7XG5cbmltcG9ydCBDYXJkIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvY2FyZC5qc1wiO1xuXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL2Zvcm1WYWxpZGF0b3IuanNcIjtcblxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9wb3B1cC13aXRoLWZvcm0uanNcIjtcblxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL3BvcHVwLXdpdGgtaW1hZ2UuanNcIjtcblxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvdXNlci1pbmZvLmpzXCI7XG5cbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgZGVmYXVsdENvbmZpZyxcbiAgY2FyZENvbnRhaW5lcixcbiAgYWRkRm9ybSxcbiAgZWRpdEZvcm0sXG4gIGVkaXRQcm9maWxlTW9kdWxlLFxuICBhZGRDYXJkTW9kdWxlLFxuICBwcm9maWxlQWRkQnV0dG9uLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgbmFtZUlucHV0LFxuICBqb2JJbnB1dCxcbiAgaW1hZ2VQb3B1cCxcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmNvbnN0IGltYWdlUG9wdXBNb2RsZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShpbWFnZVBvcHVwKTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgKCkgPT4ge1xuICAgIGltYWdlUG9wdXBNb2RsZS5vcGVuKGNhcmREYXRhLmltYWdlLCBjYXJkRGF0YS50ZXh0KTtcbiAgfSk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufVxuXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGRhdGE6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcblxuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIGNhcmRDb250YWluZXJcbik7XG5cbmNhcmRzTGlzdC5yZW5kZXJJdGVtcygpO1xuXG4vLy8gRm9ybSBGdW5jdGlvbnMgLy8vXG5cbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lLWRpc2NyaXB0aW9uXCIsXG59KTtcblxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKGVkaXRQcm9maWxlTW9kdWxlLCAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oeyBuYW1lOiBpbnB1dFZhbHVlcy5uYW1lLCBqb2I6IGlucHV0VmFsdWVzLmpvYiB9KTtcbiAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xufSk7XG5cbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKGFkZENhcmRNb2R1bGUsIChpbnB1dFZhbHVlcykgPT4ge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoe1xuICAgIHRleHQ6IGlucHV0VmFsdWVzLnRpdGxlLFxuICAgIGltYWdlOiBpbnB1dFZhbHVlcy5pbWFnZSxcbiAgfSk7XG5cbiAgY2FyZHNMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuXG4gIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xuICBhZGRGb3JtLnJlc2V0KCk7XG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uRXJyb3IoKTtcbn0pO1xuXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmltYWdlUG9wdXBNb2RsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBmb3JtSW5wdXRzID0gcHJvZmlsZUluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gZm9ybUlucHV0cy5uYW1lO1xuICBqb2JJbnB1dC52YWx1ZSA9IGZvcm1JbnB1dHMuam9iO1xuXG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufSk7XG5cbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGRlZmF1bHRDb25maWcsIGVkaXRGb3JtKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihkZWZhdWx0Q29uZmlnLCBhZGRGb3JtKTtcblxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuKGltYWdlLCB0ZXh0KSB7XG4gICAgY29uc3QgaW1hZ2VQb3B1cEltYWdlID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLmltYWdlX19wb3B1cFwiKTtcbiAgICBjb25zdCBpbWFnZVBvcHVwRGVjcmlwdGlvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmltYWdlX19kaXNjcmlwdGlvblwiXG4gICAgKTtcbiAgICBpbWFnZVBvcHVwSW1hZ2Uuc3JjID0gaW1hZ2U7XG4gICAgaW1hZ2VQb3B1cEltYWdlLmFsdCA9IHRleHQ7XG4gICAgaW1hZ2VQb3B1cERlY3JpcHRpb24udGV4dENvbnRlbnQgPSB0ZXh0O1xuXG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2luaXRpYWxBcnJheSA9IGRhdGE7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXJTZWxlY3RvcjtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2luaXRpYWxBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRoaXMiLCJfZWxlbWVudCIsInJlbW92ZSIsIl90ZXh0IiwidGV4dCIsIl9pbWFnZSIsImltYWdlIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImdlbmVyYXRlQ2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImNhcmRJbWFnZSIsImNhcmRUaXRsZSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwidGV4dENvbnRlbnQiLCJsaWtlQnV0dG9uIiwidHJhc2hCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVUcmFzaENsaWNrIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJfaGlkZUlucHV0RXJyb3IiLCJyZXNldFZhbGlkYXRpb25FcnJvciIsImZvckVhY2giLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJkaXNhYmxlZCIsInByZXZlbnREZWZhdWx0IiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2ZW50IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZSIsImtleSIsImNsb3NlIiwiX3BvcHVwU2VsZWN0b3IiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsImNvbnRhaW5zIiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtU2VsZWN0b3IiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dExpc3QiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwibmFtZSIsInZhbHVlIiwiZWRpdFByb2ZpbGVNb2R1bGUiLCJhZGRDYXJkTW9kdWxlIiwiaW1hZ2VQb3B1cCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUFkZEJ1dHRvbiIsImNhcmRDb250YWluZXIiLCJnZXRFbGVtZW50QnlJZCIsImVkaXRGb3JtIiwiYWRkRm9ybSIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiZGVmYXVsdENvbmZpZyIsImZvcm1TZWxlY3RvciIsImltYWdlUG9wdXBNb2RsZSIsImltYWdlUG9wdXBJbWFnZSIsImltYWdlUG9wdXBEZWNyaXB0aW9uIiwic3JjIiwiYWx0IiwiY3JlYXRlQ2FyZCIsImNhcmREYXRhIiwiY2FyZHNMaXN0IiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9pbml0aWFsQXJyYXkiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZEVsZW1lbnQiLCJwcm9maWxlSW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwiZWRpdFByb2ZpbGVQb3B1cCIsImFkZENhcmRQb3B1cCIsInRpdGxlIiwicmVzZXQiLCJhZGRGb3JtVmFsaWRhdG9yIiwiZm9ybUlucHV0cyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=